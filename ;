import cv2 as cv
import numpy as np
import pytesseract


def get_wheel():
    # Get the image
    image = cv.imread("screen.png")
    height, width, channels = image.shape

    # Find the wheel
    gray_image = cv.cvtColor(image, cv.COLOR_BGR2GRAY)
    circles = cv.HoughCircles(gray_image,cv.HOUGH_GRADIENT,2,200,
                              param1=200,param2=150,minRadius=width//5,maxRadius=width//3)


    circles = circles[0]
    circles = np.uint16(circles)

    # There should only be one circle
    assert len(circles) == 1

    circle = circles[0]

    # Mask out everything but the wheel
    mask = np.zeros((height, width), dtype="uint8")
    cv.circle(mask, center, circle[2], 255, -1)
    gray_image = cv.bitwise_and(gray_image, gray_image, mask = mask)

    cv.imwrite("images/mask.png")

         
get_wheel()
